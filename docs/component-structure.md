# コンポーネント構造ガイドライン

## ディレクトリ構造

各コンポーネントは以下の構造に従って整理されています：

```
components/
  ├── atoms/
  │   ├── Label/           # コンポーネントごとにディレクトリを作成
  │   │   ├── Label.tsx    # メインコンポーネントファイル
  │   │   ├── index.tsx    # エクスポートファイル
  │   │   ├── Label.test.tsx    # テストファイル（オプション）
  │   │   ├── Label.stories.tsx # Storybookファイル（オプション）
  │   │   └── styles.ts   # スタイル定義（オプション）
  │   └── Input/
  │       └── ...
```

## Atomic Design パターン

コンポーネントは Atomic Design の原則に従って以下のように分類されています：

- **atoms**: 最小単位のコンポーネント

  - Button, Input, Label など
  - これ以上分解できない基本的な UI 要素

- **molecules**: 複数の atoms で構成

  - AuthInput, SubmitButton など
  - 特定の機能を持つ小さな UI ブロック

- **organisms**: 複数の molecules で構成

  - AuthForm など
  - 特定のドメインロジックを含む大きな UI ブロック

- **templates**: ページレイアウトのテンプレート

  - 複数の organisms を配置するレイアウト
  - ページの基本構造を定義

- **pages**: ページコンポーネント
  - 実際のページを表現
  - URL に紐づくコンポーネント

## ディレクトリ構造採用の理由

1. **拡張性**:

   - 将来的なテストファイルや Storybook の追加に対応
   - コンポーネント固有のスタイルやユーティリティの追加が容易

2. **関心の分離**:

   - コンポーネントに関連するファイルを 1 つのディレクトリにまとめることで、コードの管理が容易
   - テストやスタイルなど、異なる種類のファイルを明確に分離

3. **メンテナンス性**:
   - 関連ファイルが 1 つの場所にまとまることで、コードの変更や更新が容易
   - チーム開発において、コンポーネントの構造が統一され理解しやすい

## ファイル構造と命名パターン

### コンポーネントファイルとエクスポートファイルの分離

プロジェクトでは、コンポーネントファイル（例：`Card.tsx`）とエクスポートファイル（`index.tsx`）を分離するパターンを採用しています。

```typescript
// Card.tsx - コンポーネントの実装
export const Card: React.FC<CardProps> = ({ children, ...props }) => {
  // 実装
};

// index.tsx - エクスポート
export * from "./Card";
```

#### このパターンの採用理由

1. **明確なコンポーネント識別**:

   - コンポーネント名とファイル名が一致し、コードの検索や理解が容易になる
   - エディタでのタブやファイル検索時に区別しやすい

2. **拡張の容易さ**:

   - 将来的にディレクトリ内に関連コンポーネントを追加する際に適切な構造が維持できる
   - 例: `Card` ディレクトリに後から `CardHeader`, `CardFooter` などを追加できる

3. **リファクタリングの柔軟性**:

   - コンポーネントの移動や名前変更が容易になる
   - インポートパスを変更せずに内部実装を変更できる

4. **パブリック API 管理**:

   - `index.tsx` で公開するコンポーネントや型を明示的に制御できる
   - 内部実装の詳細を隠蔽し、必要なものだけをエクスポートできる

5. **一貫性と標準化**:
   - React/TypeScript のエコシステムでよく見られる標準的なパターン
   - チーム開発において学習コストが低く、統一された構造を維持できる

この構造により、短期的にはファイル数が増えるものの、長期的なプロジェクトの成長と保守において大きなメリットがあります。

## 命名規則

1. **ディレクトリ名**:

   - パスカルケース（PascalCase）を使用
   - コンポーネント名と同じ名前を使用
   - 例: `Button/`, `AuthForm/`

2. **ファイル名**:
   - メインコンポーネント: `[ComponentName].tsx`
   - エクスポートファイル: `index.tsx`
   - テスト: `[ComponentName].test.tsx`
   - Storybook: `[ComponentName].stories.tsx`
   - スタイル: `styles.ts`

## 新しいコンポーネントの追加手順

1. コンポーネントの分類を決定（atom, molecule, organism, template, page）
2. 適切なディレクトリを作成
3. 必要なファイルを作成（index.tsx は必須）
4. 必要に応じてテスト、Storybook、スタイルファイルを追加
