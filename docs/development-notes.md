# 開発ノート

## 実装完了項目

1. 認証システムの基本機能

   - ログイン機能（メールアドレス/パスワード認証）
   - ログアウト機能
   - 認証状態の管理（Zustand を使用）
   - トークンベースの認証（Cookie を使用）

2. ルーティングと保護

   - 保護されたルート（`/top`）の実装
   - 未認証時のログインページへのリダイレクト
   - ログイン済み時のトップページへのリダイレクト

## 現状の問題点と検討事項

＃ 問題点

1. ~~/login から /top 遷移時に画面にちらつきが発生しています~~ (対応済み: https://github.com/masuim/react-typescript-auth/pull/20)

2. セキュリティ対策
   - パスワードの比較が平文で行われています。
   - トークンが単純な文字列生成（"dummy*token*" + Date.now()）で、セキュアではありません
   - エラーメッセージが具体的すぎて、セキュリティ上のリスクとなる可能性があります
     → パスワードのハッシュ化、JWT の実装、CSRF 対策などが必要です
3. エラーハンドリング
   - エラーの型が統一されていません
   - ネットワークエラーなどの例外処理が不足しています
4. パフォーマンス
   - setTimeout による人工的な遅延が実装されています
   - ユーザー検索が配列の find メソッドを使用しており、大量のユーザーがいる場合にパフォーマンスが低下する可能性があります
     （注：この問題はバックエンドの実装に依存します。データベースのインデックス化の有無や検索の実装方法によって対応方法が異なるため、バックエンドと協議の上で対応を検討する必要があります）

---

# 対応可否検討事項

1. ディレクトリ構造、命名のリファクタリング
2. コードのリファクタリング
3. レスポンシブ対応
4. UI 改善
5. メッセージの定数化
   - ハードコードしているテキストを定数化しファイルにまとめることで、重複や表記揺れを防げるようにしたいと考えました
6. テスト要否の確認
7. 認証フローの確認
   - ログイン方法やセキュリティ対応について
   - トークンの利用方法について（期限やリフレッシュトークン使用有無など）
   - ログイン試行回数制限
   - パスワード紛失時の対応
   - セッション管理（タイムアウト、自動ログアウトなど）
   - 2 要素認証（2FA）の必要性
